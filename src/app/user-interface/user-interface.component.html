<div class="top-container">
    <div class="top-left">
        <label for="menu" [ngClass]="['menu-button','background-box', 'button-animation']">
            <img class="menu-icon" src="../assets/images/icons/menu.svg">
            <p>Menu</p>
        </label>

        <div [ngClass]="['weather-container','background-box']">
            <p class="game-info-small-text">Current weather</p>
            <div class="weather-icon-container">
                <p class="weather">{{ information['Weather'] }}</p>
                <img class="weather-icon" src="../assets/images/icons/Sunny.svg">
            </div>
        </div>

        <div [ngClass]="['round-container','background-box']">
            <p class="round">Round {{ information['Round'] }}</p>
            <p class="game-info-small-text">Date {{ information['Date'] }}</p>
        </div>
    </div>

    <div [ngClass]="['background-box']">
        <ul [ngClass]="'resources'">
            <li *ngFor="let resource of resources | keyvalue">
                <div class="game-info-small-text"> {{ resource.key }}</div>
                <div class="rersource-value">{{ resource.value }}</div>
            </li>
        </ul>
    </div>


    <input type="checkbox" class="dp-none" id="menu">
    <label for="menu" class="menu-backdrop">
        <img [ngClass]="'logo'" src="../../assets/images/logo/ClashOfLans.svg" alt="Clash Of Läns">
        <ul class="menu-list">
            <li>
                <a class="menu-item" (click)="this.router.navigate(['/'])">Back to main menu</a>
            </li>
            <li>
                <a class="menu-item" href="#">Save</a>
            </li>
        </ul>
    </label>
</div>

<div class="bottom-container">
    <div class="bottom-top">
        <div class="players">

            <div [ngClass]="{'player' : true, 'player-small' : !player1Active}">
                <div class="player-flex">
                    <h3>{{playerName}}</h3>
                    <div class="player-info">
                        <p>Level {{ information['Level'] }}</p>
                    </div>
                </div>
                <div class="progress-bar-outer">
                    <div class="progress-bar-inner"></div>
                </div>
            </div>

            <div *ngFor="let players of enemyPlayerNames"
                [ngClass]="{'player' : true, 'player-small' : !player2Active}">
                <div class="player-flex">
                    <h3>{{players}}</h3>
                    <div class="player-info">
                        <p>Level 1</p>
                    </div>
                </div>
                <div class="progress-bar-outer">
                    <div class="progress-bar-inner"></div>
                </div>
            </div>
        </div>
        <button *ngIf="player1Active" mat-flat-button color="primary" [ngClass]="'end-turn-button'"
            (click)="endTurn()">End turn</button>
    </div>


    <div *ngIf="showBuildings && player1Active" class="carousel-container">
        <button [ngClass]="['carousel-button', 'button-animation']" (click)="carouselLeft()"><img
                class="carousel-button-left" src="../assets/images/icons/arrow.svg" alt="Left"></button>

        <drag-scroll #carousel class="carousel">

            <button *ngFor="let building of buildings.default" drag-scroll-item
                [ngClass]="['carousel-card', 'button-animation']" (click)="constructBuilding(building)">
                <div class="carousel-card-content">
                    <div class="card-image-container">
                        <div class="type-color" style="background-color: #1acf29;"></div>
                        <img class="type-icon" src="../assets/images/icons/house.svg">
                        <img class="card-image" [src]="building.img">
                    </div>
                    <div class="card-info-container">
                        <div class="card-info">
                            <h3>{{ building.name }}</h3>
                            <p>{{ building.cost.Money }} kr</p>
                        </div>
                        <ul class="card-material-list">
                            <li><img src="../assets/images/icons/Stone.svg">{{ building.cost.BuildingMaterials }}</li>
                        </ul>
                    </div>
                </div>
            </button>

        </drag-scroll>

        <button [ngClass]="['carousel-button', 'button-animation']" (click)="carouselRight()"><img
                class="carousel-button-right" src="../assets/images/icons/arrow.svg" alt="Right"></button>
    </div>


    <div *ngIf="showEnemies && !showBuildings && player1Active" class="attack-menu-container">
        <div class="attack-menu-lan-stats">
            <img class="lans-weapon-background" src="../assets/images/länsvapen/Västerbottens_läns_vapen.png">
            <div class="attack-menu-lan-flex-top">
                <div class="attack-menu-lan">
                    <h3>{{ playerLan }}</h3>
                    <img class="lans-weapon" src="../assets/images/länsvapen/Västerbottens_läns_vapen.png">
                </div>
                <p *ngIf="showAttack">Player 1: Attacking</p>
            </div>
            <div class="attack-menu-lan-flex">
                <div *ngFor="let resource of resources | keyvalue">
                    <h4>{{ resource.key }}</h4>
                    <p>{{ resource.value }}</p>
                </div>
            </div>
        </div>


        <div class="attack-menu-lan-stats">
            <img class="lans-weapon-background" src="../assets/images/länsvapen/Norrbottens_läns_vapen.png">
            <div class="attack-menu-lan-flex-top">
                <div class="attack-menu-lan">
                    <h3>{{ selectedLan }}</h3>
                    <img class="lans-weapon" src="../assets/images/länsvapen/Norrbottens_läns_vapen.png">
                </div>
                <p *ngIf="showAttack">Player 2: Defending</p>
            </div>
            <div *ngIf="selectedLan && !enemy" class="attack-menu-lan-flex">
                <div *ngFor="let resource of getSelectedLanResources() | keyvalue">
                    <h4>{{ resource.key }}</h4>
                    <p>{{ resource.value }}</p>
                </div>
            </div>
            <div *ngIf="selectedLan && enemy" class="attack-menu-lan-flex">
                <div *ngFor="let resource of enemyResources | keyvalue">
                    <h4>{{ resource.key }}</h4>
                    <p>{{ resource.value }}</p>
                </div>
            </div>
        </div>


        <div class="attack-menu-breakdown">
            <div class="attack-menu-breakdown-top">
                <div>
                    <h3>{{ playerLan }}</h3>
                    <p>Chance of victory: {{ playerMinPercentage }}% - {{ playerMaxPercentage }}%</p>
                </div>
                <img class="attack-icon" src="../assets/images/icons/attack.svg">
                <div>
                    <h3>{{ selectedLan }}</h3>
                </div>
            </div>
            <button (click)="attack()" *ngIf="showAttack" mat-flat-button color="primary"
                [ngClass]="'attack-button'">Attack
                {{ selectedLan }}</button>
        </div>
    </div>
</div>